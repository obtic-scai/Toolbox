<!DOCTYPE html>
<html lang="fr">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">

  <title>Toolbox</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="{{ url_for('static', filename= 'main.css') }}">

  <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js" integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>
</head>
<body>
  <div class="logo">
      <h1>Toolbox</h1>
  </div>
  <nav>
    <ul>
      <li><a href="{{ url_for('outils_corpus') }}" class="active"><i class="fas fa-book-open"></i> <em>Corpus</em></a></li>
      <li><a href="{{ url_for('outils_fouille') }}"><i class="fa-solid fa-magnifying-glass"></i> <em>Fouille de texte</em></a></li>
      <li><a href="#3"><i class="fa-solid fa-chart-column"></i> <em>Visualisation</em></a></li>
    </ul>
  </nav>

  <div class="content">

      <h2>Corpus</h2>
      <div class="tools">
        <ul>
          <li><i class="fa-solid fa-file-image"></i><a href="{{ url_for('numeriser') }}">Numériser (OCR)</a></li>
          <li><i class="fa-solid fa-file-circle-plus"></i><a href="{{ url_for('creer_corpus') }}">Créer un corpus (Wikisource)</a></li>
          <li><i class="fa-solid fa-file-code"></i><a href="{{ url_for('conversion_xml') }}">Conversion XML-TEI</a></li>
          <li><i class="fa-solid fa-spell-check"></i><a href="#">Correction d'erreur</a></li>
        </ul>
      </div>

<!-- CREATION CORPUS -->
    <div class="outil" id="t2">
      <h3>Créer un corpus (Wikisource)</h3>
      <p>La plateforme collaborative <a href="https://fr.wikisource.org/wiki/Wikisource:Accueil" target="_blank">Wikisource</a> contient de très nombreux textes littéraires libres de droits.
      L'outil ci-dessous permet de constituer un corpus à partir de ces textes, en renseignant leur URL. Plusieurs modes d'utilisation sont possibles :
      <ul style="margin-left:20px;">
        <li>Extraction de texte intégral (par défaut)</li>
        <li>Extraction d'échantillons</li>
      </ul>
    </p>

    <h4>Création rapide</h4>
    <p>Cette option permet de générer un corpus aléatoire parmi les œuvres en français de Wikisource.</p>

    <form id="wikiscraper" method="POST" action="/generate_corpus">
      <fieldset>
        <label for="nbtext">Nombre de textes</label>
        <span id="rangeValue" name="rangeValue">1</span>
        <input class="range" type="range" name="nbtext" value="0" min="1" max="8" onChange="rangeSlide(this.value)" onmousemove="rangeSlide(this.value)"></input>
        <button class="button">Génerer corpus aléatoire</button>
      </fieldset>
    </form>

    <div>
    <h4>A partir d'URL(s)</h4>
    <p>Copier ici les URLs des textes à collecter. Il est possible de collecter un texte intégral à partir d'un sommaire [<a href="https://fr.wikisource.org/wiki/Indiana" target="_blank">exemple</a>]. Dans ce cas, cocher la case Sommaire en face de l'Url indiquée.</p>
    <form id="urlform"  method="POST" action="/corpus_from_urls">
    <input type="hidden" value="1" id="nb_inputs">
    <div id="new_inputs"></div>
    <input type="text" name="url_1"></input> <input type="checkbox" name="s1"><label for="s1">Sommaire</label></input>
    <span class="addbutton" onclick="addInput()"><i class="fa-solid fa-circle-plus" style="margin-right:3px;"></i>Ajouter URL</span>
    <button type="submit" class="button" style="display:block;margin:auto;">Collecter corpus</button>
    </form>
    </div>
  </div>
  </div>


  <script type="text/javascript">
      // Range button
      function rangeSlide(value) {
          document.getElementById('rangeValue').innerHTML = value;
      }

      function addInput(){
        var nb_input = document.getElementById('nb_inputs').value + 1;
        var new_input = '<input type="text" name="url_"' + nb_input + '">';
        var new_check = '<input type="checkbox" name="s"' + nb_input + '">';
        var new_label = '<label for="s"' + nb_input + '">Sommaire</label>';

        document.getElementById('new_inputs').innerHTML += new_input;
        document.getElementById('new_inputs').innerHTML += new_check;
        document.getElementById('new_inputs').innerHTML += new_label;
        document.getElementById('nb_inputs').value = nb_input;
      }
  </script>
</body>
</html>
